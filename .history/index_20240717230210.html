<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <title>Home</title>
  </head>
  <body>
    <header>
      <img
        class="header-image"
        src="./images/kinkbarbearia-removebg-preview.png"
        alt=""
      />
    </header>
    <div id="name">
      <h1>King Barbearia</h1>
      <div id="midiasocial">
        <img
          class="icon"
          id="compartilhar"
          src="./images/compartilhar.png"
          alt="compartilhar"
        />
        <img class="icon" id="curtir" src="./images/coracao.png" alt="curtir" />
      </div>
      <p>Estrada das Lagrimas 1249, 04232-000, São Paulo</p>
    </div>
    <div class="menu">
      <nav>
        <div class="menu-toggle" id="mobile-menu">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </div>
        <ul class="nav-list">
          <li>
            <a
              href="#"
              class="active"
              onclick="toggleSection(event, 'services')"
              >Serviços</a
            >
          </li>
          <li>
            <a href="#" onclick="toggleSection(event, 'evaluation')">
              Avaliação</a
            >
          </li>
          <li>
            <a
              href="#"
              id="portfolio-link"
              onclick="toggleSection(event, 'portfolio')"
              >Portfolio</a
            >
          </li>
          <li>
            <a
              href="#"
              id="detalhes-link"
              onclick="toggleSection(event, 'detalhes')"
              >Detalhes</a
            >
          </li>
          <li>
            <a
              href="#"
              id="agenda-link"
              onclick="toggleSection(event, 'agenda')"
              >Agendamentos</a
            >
          </li>
        </ul>
      </nav>
    </div>
    <div id="services" style="display: none">
      <p>Serviços</p>
      <div id="corte">
        <h2>Corte</h2>
        <span style="font-size: 12px">Corte Simples</span>
        <div id="agendar">
          <span id="valor"><strong>R$ 30,00</strong></span>
          <span id="tempo">30m</span>
          <button id="agendar-btn" data-servico="Corte Simples">Agendar</button>
        </div>
      </div>
      <div id="barba">
        <h2>Barba</h2>
        <span style="font-size: 12px">Barba Simples</span>
        <div id="agendar">
          <span id="valor"><strong>R$ 30,00</strong></span>
          <span id="tempo">30m</span>
          <button id="agendar-btn" data-servico="Barba">Agendar</button>
        </div>
      </div>
      <div id="pezinho">
        <h2>Pezinho</h2>
        <span style="font-size: 12px">Pezinho</span>
        <div id="agendar">
          <span id="valor"><strong>R$ 15,00</strong></span>
          <span id="tempo">15m</span>
          <button id="agendar-btn" data-servico="Pezinho">Agendar</button>
        </div>
      </div>
      <div id="cortebarba">
        <h2>Corte + Barba</h2>
        <span style="font-size: 12px">Corte E Barba</span>
        <div id="agendar">
          <span id="valor"><strong>R$ 50,00</strong></span>
          <span id="tempo">50m</span>
          <button id="agendar-btn" data-servico="Corte + Barba">Agendar</button>
        </div>
      </div>
      <div id="cortesobrancelha">
        <h2>Corte + Sobrancelha</h2>
        <span style="font-size: 12px">Corte E Sobrancelha</span>
        <div id="agendar">
          <span id="valor"><strong>R$ 35,00</strong></span>
          <span id="tempo">45m</span>
          <button id="agendar-btn" data-servico="Corte + Sobrancelha">
            Agendar
          </button>
        </div>
      </div>
      <div id="cortebs">
        <h2>Corte + Sobrancelha + Barba</h2>
        <span style="font-size: 12px">Corte Sobrancelha E Barba</span>
        <div id="agendar">
          <span id="valor"><strong>R$ 55,00</strong></span>
          <span id="tempo">60m</span>
          <button id="agendar-btn" data-servico="Corte Sombrancelha E Barba">
            Agendar
          </button>
        </div>
      </div>
      <br />
    </div>
    <!-- Modal for Scheduling -->
    <div id="scheduleModal" class="modal" style="display: none">
      <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h2>Agendar Serviço</h2>
        <form id="scheduleForm" onsubmit="submitForm(event)">
          <input type="hidden" name="service" />
          <input type="hidden" name="value" />
          <input type="hidden" name="time" />
          <input type="hidden" name="duration" />
          <input type="hidden" name="valueservice" />
          <input
            type="text"
            id="userNameField"
            placeholder="Digite Seu Nome"
            required
          />
          <input
            type="text"
            name="phone"
            id="userPhoneField"
            placeholder="Digite Seu Whatsapp"
            required
          />
          <label for="barber">Escolha o Barbeiro:</label>
          <select id="barber" name="barber" required>
            <option value="Wallace">Wallace</option>
            <option value="Mateus">Mateus</option>
          </select>
          <label for="date">Escolha a Data:</label>
          <input type="date" id="date" name="date" required lang="pt-BR" />
          <label for="time">Escolha o Horário:</label>
          <input type="time" id="time" name="time" required />
          <button type="submit" id="confirmSchedule">
            Confirmar Agendamento
          </button>
        </form>
      </div>
    </div>

    <!-- Update Agenda Section -->
    <div id="agenda" style="display: none">
      <h2>Agendamentos</h2>
      <div id="bookings"></div>
      <button onclick="fetchBookings()">Mostrar Agendamentos</button>
    </div>

    <div id="portfolio" style="display: none">
      <div id="foto1">
        <img src="./images/foto1.jpg" alt="" />
      </div>
      <div id="foto2">
        <img src="./images/foto2.jpg" alt="" />
      </div>
      <div id="foto3">
        <img src="./images/foto3.jpg" alt="" />
      </div>
      <div id="foto4">
        <img src="./images/foto4.jpg" alt="" />
      </div>
      <div id="foto5">
        <img src="./images/foto5.jpg" alt="" />
      </div>
      <div id="foto6">
        <img src="./images/foto6.jpg" alt="" />
      </div>
    </div>
    <div id="evaluation" style="display: none">
      <h1>5,0</h1>
      <div id="avaliacao">
        <img
          class="estrela"
          data-avaliacao="1"
          src="./images/estrela.png"
          alt=""
        />
        <img
          class="estrela"
          data-avaliacao="2"
          src="./images/estrela.png"
          alt=""
        />
        <img
          class="estrela"
          data-avaliacao="3"
          src="./images/estrela.png"
          alt=""
        />
        <img
          class="estrela"
          data-avaliacao="4"
          src="./images/estrela.png"
          alt=""
        />
        <img
          class="estrela"
          data-avaliacao="5"
          src="./images/estrela.png"
          alt=""
        />
      </div>
      <span>20 Avaliações</span>
      <div id="media"></div>
      <div id="nota">
        <span class="nota"
          >5 <img class="estrelanota" src="./images/estrelanota.png" alt=""
        /></span>
        <span class="nota"
          >4 <img class="estrelanota" src="./images/estrelanota.png" alt=""
        /></span>
        <span class="nota"
          >3 <img class="estrelanota" src="./images/estrelanota.png" alt=""
        /></span>
        <span class="nota"
          >2 <img class="estrelanota" src="./images/estrelanota.png" alt=""
        /></span>
        <span class="nota"
          >1 <img class="estrelanota" src="./images/estrelanota.png" alt=""
        /></span>
        <div class="status-star">
          <div class="status-bar">
            <div
              class="status-bar-fill"
              id="status-bar-fill5"
              style="width: 80%"
            ></div>
          </div>
          <div class="status-bar">
            <div
              class="status-bar-fill"
              id="status-bar-fill4"
              style="width: 30%"
            ></div>
          </div>
          <div class="status-bar">
            <div
              class="status-bar-fill"
              id="status-bar-fill3"
              style="width: 1%"
            ></div>
          </div>
          <div class="status-bar">
            <div class="status-bar-fill" id="status-bar-fill2"></div>
          </div>
          <div class="status-bar">
            <div class="status-bar-fill" id="status-bar-fill1"></div>
          </div>
        </div>
      </div>
    </div>
    <div id="detalhes" style="display: none">
      <div id="map"></div>
      <button id="navigate-button">
        <img
          id="logobt"
          src="./images/kinkbarbearia-removebg-preview.png"
          alt=""
        />
        <h1>Kink Barbearia</h1>
        <span
          >Estrada Das Lagrimas 1249, 04232-000, São Paulo
          <div class="vertical-line"></div>
          <img id="iconnavegar" src="./images/gps.png" alt=""
        /></span>
      </button>
      <div id="horarios">
        <h1>
          <strong>Contato e Horario De Funcionamento</strong>
          <div class="horizontal-line"></div>
          <a href="https://wa.me/5511987410733" target="_blank"
            >(11) 98741-0733
            <img
              class="icon"
              id="whatsapp"
              src="./images/whatsapp.png"
              alt="whatsapp"
            />
          </a>
        </h1>
        <div class="horizontal-line"></div>
        <div class="funcionamento">
          <div id="segunda">
            <p>Segunda-Feira a Sexta-Feira</p>
            <span id="horas"><strong>10:00 - 20:00</strong></span>
          </div>
          <div id="sabado">
            <p>Sabado</p>
            <span id="horas"><strong>09:00 - 19:00</strong></span>
          </div>
          <div id="domingo">
            <p>Domingo</p>
            <span id="horas"><strong>Fechado</strong></span>
          </div>
          <div id="barbeiros">
            <p>Wallace</p>
            <span id="horas"
              ><strong>Terça-Feira Não Realiza Atendimentos</strong></span
            >
            <p>Mateus</p>
            <span id="horas"
              ><strong>Quarta-Feira Não Realiza Atendimentos</strong></span
            >
          </div>
        </div>
      </div>
    </div>
    <div id="myModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Bem-vindo à King Barbearia</h2>
        <p>Escolha uma opção:</p>
        <button id="loginBtn">Já sou cadastrado</button>
        <button id="registerBtn">Cadastre-se</button>
      </div>
    </div>
    <div id="agenda" style="display: none">
      <div id="servico-selecionado"></div>
    </div>
    <footer></footer>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="script.js"></script>
    <script>
      // Add an event listener to the button to show the modal and set service details
      document.querySelectorAll("#agendar-btn").forEach((button) => {
        button.addEventListener("click", (event) => {
          const service = event.target.dataset.servico;
          const value =
            event.target.parentElement.querySelector(
              "#valor strong"
            ).textContent;
          const time =
            event.target.parentElement.querySelector("#tempo").textContent;

          // Get the duration from the time string
          const duration = time.replace("m", "");
          const valueService = `${service} - ${value} - ${time}`;

          // Set the form values
          const form = document.getElementById("scheduleForm");
          form.service.value = service;
          form.value.value = value;
          form.time.value = time;
          form.duration.value = duration;
          form.valueservice.value = valueService;

          // Show the modal
          document.getElementById("scheduleModal").style.display = "block";
        });
      });

      // Close modal function
      function closeModal() {
        document.getElementById("scheduleModal").style.display = "none";
      }

      // Function to toggle the visibility of sections
      function toggleSection(event, sectionId) {
        event.preventDefault();

        const sections = document.querySelectorAll("div[id]");
        sections.forEach((section) => {
          if (section.id === sectionId) {
            section.style.display = "block";
          } else {
            section.style.display = "none";
          }
        });
      }

      // Fetch bookings
      function fetchBookings() {
        const bookings = JSON.parse(localStorage.getItem("bookings")) || [];
        const bookingsContainer = document.getElementById("bookings");
        bookingsContainer.innerHTML = "";

        bookings.forEach((booking) => {
          const bookingElement = document.createElement("div");
          bookingElement.textContent = `${booking.service} - ${booking.date} - ${booking.time} - ${booking.name}`;
          bookingsContainer.appendChild(bookingElement);
        });
      }

      // Form submission handler
      function submitForm(event) {
        event.preventDefault();

        const form = event.target;
        const service = form.service.value;
        const value = form.value.value;
        const time = form.time.value;
        const duration = form.duration.value;
        const valueservice = form.valueservice.value;
        const name = form.userNameField.value;
        const phone = form.userPhoneField.value;
        const barber = form.barber.value;
        const date = form.date.value;

        // Create a new booking object
        const booking = {
          service,
          value,
          time,
          duration,
          valueservice,
          name,
          phone,
          barber,
          date,
        };

        // Get existing bookings from localStorage
        const bookings = JSON.parse(localStorage.getItem("bookings")) || [];

        // Add the new booking to the list
        bookings.push(booking);

        // Save the updated bookings list to localStorage
        localStorage.setItem("bookings", JSON.stringify(bookings));

        // Close the modal
        closeModal();

        // Fetch and display updated bookings
        fetchBookings();
      }

      // Autocomplete name and phone fields with logged-in user's details
      document.addEventListener("DOMContentLoaded", function () {
        const userNameField = document.getElementById("userNameField");
        const userPhoneField = document.getElementById("userPhoneField");

        const storedName = localStorage.getItem("userName");
        const storedPhone = localStorage.getItem("userPhone");

        if (storedName) {
          userNameField.value = storedName;
        }
        if (storedPhone) {
          userPhoneField.value = storedPhone;
        }
      });
    </script>
  </body>
</html>
