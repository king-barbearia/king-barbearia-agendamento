<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="mobile.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <title>Home</title>
</head>
<body>
  <header>
    <img class="header-image" src="./images/kinkbarbearia-removebg-preview.png" alt="" />
  </header>
  <div id="name">
    <h1>King Barbearia</h1>
    <div id="midiasocial">
      <img class="icon" id="compartilhar" src="./images/compartilhar.png" alt="compartilhar" />
      <img class="icon" id="curtir" src="./images/coracao.png" alt="curtir" />
    </div>
    <p>Estrada das Lagrimas 1249, 04232-000, São Paulo</p>
  </div>
  <div class="menu">
    <nav>
      <div class="menu-toggle" id="mobile-menu">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </div>
      <ul class="nav-list">
        <li><a href="#" class="active" onclick="toggleSection(event, 'services')">Serviços</a></li>
        <li><a href="#" onclick="toggleSection(event, 'evaluation')">Avaliação</a></li>
        <li><a href="#" id="portfolio-link" onclick="toggleSection(event, 'portfolio')">Portfolio</a></li>
        <li><a href="#" id="detalhes-link" onclick="toggleSection(event, 'detalhes')">Detalhes</a></li>
        <li><a href="#" id="agenda-link" onclick="toggleSection(event, 'agenda')">Agendamentos</a></li>
      </ul>
    </nav>
  </div>
  <div id="services" style="display: none">
    <div id="corte">
      <h2>Corte</h2>
      <span style="font-size: 12px">Corte Simples</span>
      <div id="agendar">
        <span id="valor"><strong>R$ 30,00</strong></span>
        <span id="tempo">30m</span>
        <button id="agendar-btn" data-servico="Corte Simples">Agendar</button>
      </div>
    </div>
    <div id="barba">
      <h2>Barba</h2>
      <span style="font-size: 12px">Barba Simples</span>
      <div id="agendar">
        <span id="valor"><strong>R$ 30,00</strong></span>
        <span id="tempo">30m</span>
        <button id="agendar-btn" data-servico="Barba">Agendar</button>
      </div>
    </div>
    <div id="pezinho">
      <h2>Pezinho</h2>
      <span style="font-size: 12px">Pezinho</span>
      <div id="agendar">
        <span id="valor"><strong>R$ 15,00</strong></span>
        <span id="tempo">15m</span>
        <button id="agendar-btn" data-servico="Pezinho">Agendar</button>
      </div>
    </div>
    <div id="cortebarba">
      <h2>Corte + Barba</h2>
      <span style="font-size: 12px">Corte E Barba</span>
      <div id="agendar">
        <span id="valor"><strong>R$ 50,00</strong></span>
        <span id="tempo">50m</span>
        <button id="agendar-btn" data-servico="Corte + Barba">Agendar</button>
      </div>
    </div>
    <div id="cortesobrancelha">
      <h2>Corte + Sobrancelha</h2>
      <span style="font-size: 12px">Corte E Sobrancelha</span>
      <div id="agendar">
        <span id="valor"><strong>R$ 35,00</strong></span>
        <span id="tempo">45m</span>
        <button id="agendar-btn" data-servico="Corte + Sobrancelha">Agendar</button>
      </div>
    </div>
    <div id="cortebs">
      <h2>Corte + Sobrancelha <br />+ Barba</h2>
      <span style="font-size: 12px">Corte Sobrancelha E Barba</span>
      <div id="agendar">
        <span id="valor"><strong id="55">R$ 55,00</strong></span>
        <span id="tempo">60m</span>
        <button id="agendar-btn" data-servico="Corte Sombrancelha E Barba">Agendar</button>
      </div>
    </div>
  </div>
  <div id="crs"></div>
  <!-- Modal for Scheduling -->
  <div id="scheduleModal" class="modal" style="display: none">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <img src="./images/kinkbarbearia-removebg-preview.png" alt="" style="width: 60px; height: 60px; margin-left: -219px; margin-top: -12px;" />
      <form id="scheduleForm" onsubmit="submitForm(event)">
        <input type="hidden" name="service" />
        <input type="hidden" name="value" />
        <input type="hidden" name="time" />
        <input type="hidden" name="duration" />
        <input type="hidden" name="valueservice" />
        <label style="margin-bottom: 20px; font-size: 15px; font-weight: 500; color: #bdbdbd; margin-left: 90px;">Escolha o Barbeiro</label>
        <div style="margin-bottom: 30px; margin-top: -105px; margin-left: 85px">
          <img src="./images/wallace1c.jpg" alt="Wallace" width="60" height="60" style="border-radius: 50%; margin-right: 15px; border: solid 1px; border-color: #bdbdbd;" onclick="selectBarber('Wallace')" />
          <img src="./images/mateus1.jpg" alt="Mateus" width="60" height="60" style="border-radius: 50%; border: solid 1px; border-color: #bdbdbd;" onclick="selectBarber('Mateus')" />
          <input type="hidden" id="barber" name="barber" />
        </div>
        <div id="brs" style="background-color: #bdbdbd; width: 300px; height: 1px; position: absolute; margin-top: 18px; margin-left: -21px;"></div>
        <label>Nome Do Cliente</label>
        <input type="text" name="name" id="userNameField" placeholder="Digite Seu Nome" required autocomplete="name" />
        <label>WhatsApp</label>
        <input type="text" name="phone" id="userPhoneField" placeholder="Digite Seu Whatsapp" required autocomplete="tel" />
        <label>Escolha a Data e Horário:</label>
        <input type="text" id="datetime" name="datetime" readonly placeholder="Selecione a data e horário" onclick="openCalendarModal()" />
        <button type="submit" id="confirmSchedule">Confirmar Agendamento</button>
      </form>
    </div>
  </div>

  <!-- Modal for Calendar and Time Slots -->
  <div id="calendarModal" class="modal" style="display: none">
    <div class="modal-content">
      <span class="close" onclick="closeCalendarModal()">&times;</span>
      <div id="calendar"></div>
      <div id="timeSlots" style="margin-top: 20px; overflow-y: auto; max-height: 200px;"></div>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="row">
        <div class="footer-col">
          <h4>King Barbearia</h4>
          <ul>
            <li><a href="https://linktr.ee/kinkbarbearia">Sobre Nós</a></li>
            <li><a href="#">Nossa História</a></li>
            <li><a href="https://linktr.ee/kinkbarbearia">Linktree</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Ajuda</h4>
          <ul>
            <li><a href="#">FAQ</a></li>
            <li><a href="#">Serviços</a></li>
            <li><a href="#">Agendamento</a></li>
            <li><a href="#">Opções de Pagamento</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Midia Social</h4>
          <div class="social-links">
            <a href="https://www.instagram.com/kink.barbearia" target="_blank"><i class="fab fa-facebook-f"></i></a>
            <a href="https://www.instagram.com/kink.barbearia" target="_blank"><i class="fab fa-twitter"></i></a>
            <a href="https://www.instagram.com/kink.barbearia" target="_blank"><i class="fab fa-instagram"></i></a>
            <a href="https://www.instagram.com/kink.barbearia" target="_blank"><i class="fab fa-linkedin-in"></i></a>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <script src="script.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const agendarButtons = document.querySelectorAll('#agendar-btn');
      agendarButtons.forEach(button => {
        button.addEventListener('click', function () {
          const service = this.getAttribute('data-servico');
          const value = this.parentElement.querySelector('#valor').textContent;
          const time = this.parentElement.querySelector('#tempo').textContent;

          openModal(service, value, time);
        });
      });

      function openModal(service, value, time) {
        const modal = document.getElementById('scheduleModal');
        modal.querySelector('input[name="service"]').value = service;
        modal.querySelector('input[name="value"]').value = value;
        modal.querySelector('input[name="time"]').value = time;
        modal.style.display = 'block';
      }

      function closeModal() {
        const modal = document.getElementById('scheduleModal');
        modal.style.display = 'none';
      }

      window.onclick = function (event) {
        const modal = document.getElementById('scheduleModal');
        const calendarModal = document.getElementById('calendarModal');
        if (event.target == modal) {
          modal.style.display = 'none';
        }
        if (event.target == calendarModal) {
          calendarModal.style.display = 'none';
        }
      }

      function openCalendarModal() {
        const calendarModal = document.getElementById('calendarModal');
        calendarModal.style.display = 'block';

        // Fetch available time slots from the backend and display them
        fetch('/agenda')
          .then(response => response.json())
          .then(data => {
            const timeSlotsContainer = document.getElementById('timeSlots');
            timeSlotsContainer.innerHTML = '';
            data.forEach(timeSlot => {
              const slotElement = document.createElement('div');
              slotElement.className = 'time-slot';
              slotElement.textContent = timeSlot;
              slotElement.onclick = function () {
                selectTimeSlot(timeSlot);
              };
              timeSlotsContainer.appendChild(slotElement);
            });
          });
      }

      function closeCalendarModal() {
        const calendarModal = document.getElementById('calendarModal');
        calendarModal.style.display = 'none';
      }

      function selectTimeSlot(timeSlot) {
        const datetimeInput = document.getElementById('datetime');
        datetimeInput.value = timeSlot;
        closeCalendarModal();
      }

      function selectBarber(barber) {
        const barberInput = document.getElementById('barber');
        barberInput.value = barber;
      }

      function submitForm(event) {
        event.preventDefault();
        // Handle form submission logic here
      }
    });
  </script>
</body>
</html>
